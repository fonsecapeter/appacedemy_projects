{"version":3,"sources":["webpack/bootstrap cd95f42eb8aba93c1966","./frontend/twitter.js","./frontend/follow_toggle.js","./frontend/users_search.js","./frontend/tweet_compose.js","./frontend/infinite_tweets.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,EAAC;;;;;;;ACrBD;AACA;AACA;AACA,mFAAkF;;AAElF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,sBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,oCAAmC;AACnC;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;;;;;ACvEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,+BAA8B,QAAQ;AACtC,yBAAwB,cAAc;AACtC,gBAAe,cAAc;;AAE7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA,IAAG;AACH;;AAEA;;;;;;;ACvDA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C,UAAU;;AAEpD;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;;;;;;ACpGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cd95f42eb8aba93c1966\n **/","const FollowToggle = require('./follow_toggle');\nconst UsersSearch  = require('./users_search');\nconst TweatCompose = require('./tweet_compose');\nconst InfiniteTweats = require('./infinite_tweets');\n\n$(document).ready ( () => {\n  $('.follow-toggle').each((idx, button) => {\n    new FollowToggle(button);\n  });\n\n  $('.users-search').each((idx, nav) => {\n    new UsersSearch(nav);\n  });\n\n  $('.tweet-compose').each((idx, form) => {\n    new TweatCompose(form);\n  });\n\n  $('.infinite-tweets').each((idx, div) => {\n    new InfiniteTweats(div);\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/twitter.js\n ** module id = 0\n ** module chunks = 0\n **/","function FollowToggle (el, options) {\n  this.$el = $(el);\n  this.userId = this.$el.data('user-id') || options.userId;\n  this.followState = this.$el.data('initial-follow-state') || options.followState; // bool > string\n\n  this.render();\n  this.handleClick();\n}\n\nFollowToggle.prototype.handleClick = function () {\n  this.$el.on('click', event => {\n    event.preventDefault();\n    this.followStateInProcess();\n\n    let self = this;\n\n    let verb = '';\n    if (this.followState === 'following') {\n      verb = 'POST';\n    } else {\n      verb = 'DELETE';\n    }\n\n    $.ajax({\n      url: `/users/${this.userId}/follow`,\n      type: verb,\n      dataType: 'json',\n      data: {\n        userId: this.userId,\n        followState: this.followState\n      },\n      success() {\n        self.toggleFollowState();\n        self.render();\n      }\n    });\n  });\n};\n\nFollowToggle.prototype.render = function () {\n  if (this.followState === 'followed') {\n    this.$el.html('Unfollow!');\n  } else {\n    this.$el.html('Follow!');\n  }\n\n  // ensure disabled if in process; enabled if not (backwords)\n  if (this.followState === 'followed' || this.followState === 'unfollowed') {\n    this.$el.prop('disabled', false);\n  } else {\n    this.$el.prop('disabled', true);\n  }\n};\n\nFollowToggle.prototype.toggleFollowState = function () {\n  if (this.followState === 'followed'|| this.followState === 'unfollowing') {\n    this.followState = 'unfollowed';\n  } else {\n    this.followState = 'followed';\n  }\n};\n\nFollowToggle.prototype.followStateInProcess = function () {\n  if (this.followState === 'followed') {\n      this.followState = 'unfollowing';\n    } else {\n      this.followState = 'following';\n    }\n  this.render();\n};\n\nmodule.exports = FollowToggle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/follow_toggle.js\n ** module id = 1\n ** module chunks = 0\n **/","const FollowToggle = require('./follow_toggle');\n\nfunction UsersSearch (el) {\n  this.$el = $(el);\n  let children = this.$el.children();\n  this.$input = $(children[0]);\n  this.$list = $(children[1]);\n\n  this.handleInput();\n}\n\nUsersSearch.prototype.handleInput = function () {\n  this.$input.on('input', event => {\n    let self = this;\n\n    $.ajax({\n      url: '/users/search',\n      type: 'GET',\n      data: {\n        query: this.$input.val()\n      },\n      dataType: 'json',\n      success(users) {\n        self.renderResults(users);\n      }\n    });\n  });\n};\n\nUsersSearch.prototype.renderResults = function (users) {\n  this.$list.empty();\n  users.forEach((user) => {\n\n    let item = $('<li></li>');\n\n    let anchor = $('<a>')\n      .attr('href', `/users/${user.id}`)\n      .attr('title', `${user.username}`)\n      .text(`${user.username}`);\n\n    let followedState = (user.followed) ? 'followed' : 'unfollowed';\n    let followButton = $('<button></buttton')\n      .attr('data-user-id', user.id)\n      .attr('data-initial-followed-state', followedState)\n      .addClass('follow-toggle');\n\n    new FollowToggle(followButton, {\n      userId: user.id,\n      followState: followedState\n    });\n\n    this.$list.append(item.append(anchor.append(followButton)));\n  });\n};\n\nmodule.exports = UsersSearch;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/users_search.js\n ** module id = 2\n ** module chunks = 0\n **/","function TweatCompose (el) {\n  this.$el = $(el);\n  this.$inputs = $(this.$el.find(':input'));\n  this.$feed = $(this.$el.data('tweets-ul'));\n\n  this.$textArea = $(this.$el.find('textarea')[0]);\n  this.$charWatch = $(this.$el.find('.chars-left')[0]);\n\n  this.$addMentionedUserAnchor = $(this.$el.find('.add-mentioned-user')[0]);\n  this.$mentionedUsersContainer = $(this.$el.find('.mentioned-users'));\n\n\n  this.submit();\n  this.watchChars();\n  this.addMentionedUser();\n  this.removeMentionedUser();\n}\n\nTweatCompose.prototype.submit = function () {\n  this.$el.on('submit', event => {\n    event.preventDefault();\n    let self = this;\n    let formData = this.$el.serialize();\n\n    this.disableInput();\n\n    $.ajax({\n      url: '/tweets',\n      type: 'POST',\n      data: formData,\n      dataType: 'json',\n      success(newTweet) {\n        self.handleSuccess(newTweet);\n      }\n    });\n  });\n};\n\nTweatCompose.prototype.handleSuccess = function (newTweet) {\n  let $item = $('<li></li>').html(JSON.stringify(newTweet));\n  this.$feed.append($item);\n\n  this.clearInput();\n  this.enableInput();\n};\n\nTweatCompose.prototype.disableInput = function () {\n  this.$inputs.each((idx, input) => {\n    $(input).prop('disabled', true);\n  });\n};\n\nTweatCompose.prototype.enableInput = function () {\n  this.$inputs.each((idx, input) => {\n    $(input).prop('disabled', false);\n  });\n};\n\nTweatCompose.prototype.clearInput = function () {\n  this.$inputs.each((idx, input) => {\n    if (input.type !== 'submit') {\n      $(input).val('');\n    }\n  });\n\n  this.$mentionedUsersContainer.empty();\n};\n\n// ------------------------------------------------------------------ //\n\nTweatCompose.prototype.watchChars = function () {\n  this.$textArea.on('input', event => {\n    let self = this;\n\n    let charCount = this.$textArea.val().length;\n    let charsLeft = 140 - charCount;\n    let charText = (charsLeft < 140) ? `${charsLeft} characters left` : '';\n\n    this.$charWatch.html(charText);\n  });\n};\n\n// ------------------------------------------------------------------ //\n\nTweatCompose.prototype.addMentionedUser = function () {\n  this.$addMentionedUserAnchor.on('click', event => {\n    let $scriptTag = $(this.$el.find('script'));\n\n    this.$mentionedUsersContainer.append($scriptTag.html());\n\n  });\n};\n\nTweatCompose.prototype.removeMentionedUser = function () {\n  this.$mentionedUsersContainer.on('click', event => {\n    if(event.target.className === 'remove-mentioned-user') {\n      $(event.target).parent().remove();\n    }\n  });\n};\nmodule.exports = TweatCompose;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/tweet_compose.js\n ** module id = 3\n ** module chunks = 0\n **/","function InfiniteTweats(el) {\n  this.$el = $(el);\n  this.$feed = $('#feed');\n  this.$fetchAnchor = $('.fetch-more');\n  this.maxCreatedAt = null;\n\n  this.fetchTweets();\n}\n\nInfiniteTweats.prototype.fetchTweets = function () {\n  this.$fetchAnchor.on('click', event => {\n    let self = this;\n    let pageData;\n\n    if (this.maxCreatedAt === null) {\n      pageData = {\n        limit: 20,\n      };\n    } else {\n      pageData = {\n        limit: 20,\n        max_created_at: this.maxCreatedAt\n      };\n    }\n\n    $.ajax({\n      url: '/feed',\n      type: 'GET',\n      data: pageData,\n      dataType: 'json',\n      success(moreTweets) {\n        console.log(moreTweets);\n        self.insertTweets(moreTweets);\n      }\n    });\n  });\n};\n\nInfiniteTweats.prototype.insertTweets = function (moreTweets) {\n  moreTweets.forEach(tweet => {\n    let $item = $('<li></li>').html(JSON.stringify(tweet));\n    this.$feed.append($item);\n  });\n};\n\nmodule.exports = InfiniteTweats;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/infinite_tweets.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}